Include: setup.vader

================================================================================

Execute (buffer has name "treevial"):
  Assert bufexists('treevial')

Execute (buffer has filetype "treevial"):
  AssertEqual 'treevial', &ft

Execute (buffer is readonly):
  AssertEqual 1, &ro

================================================================================

Expect (buffer lists contents of test/files/):
  files/
    folded-exe/example.sh
    folded-sym/example.ln
    folded-sym-exe/example.sh
    folded-sym-long/example.ln
  + nested/directory/
    example.ln
    example.sh
    example.txt

================================================================================

Do (expand test/files/nested/directory/ using <enter>):
  5j\<Cr>

Expect (buffer shows contents nested in test/files/nested/directory/):
  files/
    folded-exe/example.sh
    folded-sym/example.ln
    folded-sym-exe/example.sh
    folded-sym-long/example.ln
  - nested/directory/
      a.txt
      b.txt
    example.ln
    example.sh
    example.txt

================================================================================

Do (add nested/directory/c.txt):
  c/nested/directory/c.txt\<Cr>

Expect (the file to be created):
  files/
    folded-exe/example.sh
    folded-sym/example.ln
    folded-sym-exe/example.sh
    folded-sym-long/example.ln
  - nested/directory/
      a.txt
      b.txt
      c.txt
    example.ln
    example.sh
    example.txt

Execute (clean up created file):
  if filereadable('nested/directory/c.txt')
    call delete('nested/directory/c.txt')
    Treevial
  endif

================================================================================

Do (rename nested/directory/b.txt to nested/directory/d.txt):
  gg7jm\<Left>\<Left>\<Left>\<Left>\<Bs>d\<Cr>

Expect (the file to be renamed):
  files/
    folded-exe/example.sh
    folded-sym/example.ln
    folded-sym-exe/example.sh
    folded-sym-long/example.ln
  - nested/directory/
      a.txt
      d.txt
    example.ln
    example.sh
    example.txt

Execute (reset renamed file):
  if filereadable('nested/directory/d.txt')
    call rename('nested/directory/d.txt', 'nested/directory/b.txt')
    Treevial
  endif
